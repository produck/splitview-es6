/*!
 * Splitview v0.1.2
 * (c) 2020-2021 ChaosLee
 * Released under the MIT License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).splitview={})}(this,(function(e){"use strict";const n=4*window.screen.width;const i={display:"block",top:"0",left:"0",position:"relative",width:"100%",height:"100%",overflow:"hidden",border:"none",padding:"0",margin:"0"},t={display:"block",position:"absolute",overflow:"hidden"},o={display:"block",overflow:"visible",top:"0",left:"0",position:"absolute","z-index":"1"},r={display:"block",position:"absolute","transition-property":"background-color","transition-duration":"0.2s","transition-delay":"0.1s","user-select":"none"},s=window,c=document,u=Math;function l(){return c.createElement("div")}function a(e,n){e.className=n}function f(e,n,i){e.addEventListener(n,i)}function d(e,n,i){e.removeEventListener(n,i)}function p(e,n){const i=new Event(e,{bubbles:!0});return i.data=n,i}function h(e,n,i){return u.max(u.min(i,n),e)}function m(e,n){for(const i in n)e.style.setProperty(i,n[i],"important")}const w={row:{p:"clientX",cSS:"height",cSO:"top",sS:"width",sO:"left",oS:"offsetWidth",o:"offsetLeft",sCV:"col-resize"},column:{p:"clientY",cSS:"width",cSO:"left",sS:"height",sO:"top",oS:"offsetHeight",o:"offsetTop",sCV:"row-resize"}},g=e=>e._size,v=e=>e.min;function z(e,n,i){let t=0;return e.each(n,(e=>t+=i(e))),t}const b={1:function(e){const n=e[0];return{direction:1,pulled:n,limit:{pull:n.max,push:z(n,1,v)},origin:{pull:n.size,push:z(n,1,g)}}},0:function(e){const n=e;return{direction:0,pulled:n,limit:{pull:n.max,push:z(n,0,v)},origin:{pull:n.size,push:z(n,0,g)}}}};function x(e,n){return u.trunc(u.abs(e-n))}function S(e){const n=y({max:0,min:0},e),i=new Object(n);return i.view=null,i}function y(e,n){const i=l(),o=l();function w(e,n){const{limit:i,origin:t,pulled:o,direction:r}=n;o.size=u.min(i.pull,t.pull+t.push-i.push,t.pull+e);let s=o.size-t.pull;o.each(r,(e=>{const n=e._size-s>e.min?s:e._size-e.min;e.size=e._size-n,s-=n}))}a(o,"sv-view"),a(i,"sv-handler"),m(o,t),function(e){m(e,r)}(i);let g=!1;function v(){const e=z.resizing&&n.resizing,t=g&&!n.resizing;m(i,e||t?{"background-color":"#007fd4",cursor:n.axis.sCV}:{"background-color":null,cursor:"default"})}f(i,"mouseover",(()=>g=!0)),f(i,"mouseout",(()=>g=!1)),f(i,"mousedown",(function(e){const{axis:i}=n,t=e[i.p];m(c.body,{cursor:i.sCV}),z.resizing=n.resizing=!0,n.snapshot();const o={1:b[1](z),0:b[0](z)};function r(e){const r=e[i.p]-t;n.restore(),0!==r&&w(u.abs(r),o[r>0?1:0])}f(s,"mousemove",r),f(s,"mouseup",(function e(){d(s,"mousemove",r),d(s,"mouseup",e),m(c.body,{cursor:"default"}),z.resizing=n.resizing=!1,v()}))})),f(i,"mouseover",v),f(i,"mouseout",v),f(i,"dblclick",(function(){i.dispatchEvent(p("request-reset",z.view))}));const z={resizing:!1,_size:0,0:null,1:null,get min(){return e.min},get max(){return e.max},get resizable(){return e.max!==e.min},get eView(){return o},get eHandler(){return i},get size(){return o[n.axis.oS]+.01},get o(){return o[n.axis.o]},set size(e){z.size!==e&&(m(o,{[n.axis.sS]:`${e}px`}),z.each(1,(e=>e.fixOffset())),o.dispatchEvent(p("view-size-change",z.view)))},each(e,n){let i=z[e];for(;null!==i&&null!==i[e];)n(i),i=i[e]},fixOffset(){const{axis:e}=n,t=z[0].o+z[0].size;m(o,{[e.sO]:`${t}px`}),m(i,{[e.sO]:t-2+"px "})},relayout(){const{axis:e}=n;m(o,{[e.cSS]:"100%",[e.cSO]:"0"}),m(i,{[e.cSS]:"100%",[e.cSO]:"0",[e.sS]:"4px",display:z[0].resizable?"block":"none"}),z.size=z.min},view:Object.seal({get container(){return n.container},get element(){return o},get previousSibling(){return z[0].view},get nextSibling(){return z[1].view},get size(){return u.trunc(z.size)},setSize(e){if("number"!=typeof e)throw new Error("A view size MUST be a number.");const i=h(z.min,z.max,e);if(n.snapshot(),0===x(i,z.size))return 0;const t=i-z.size;if(w(u.abs(t),b[t>0?1:0](z[1])),0!==x(i,z.size)){const e=i-z.size;w(u.abs(e),b[e>0?0:1](z))}return x(i,z.size)}})};return z}e.Container=function(){const e=l(),t=l();a(e,"sv-container"),a(t,"sv-handler-container"),m(e,i),function(e){m(e,o)}(t),e.appendChild(t);let r=null;function c(){clearTimeout(r);const n=[];x[0].each(1,(e=>n.push(e))),n.sort(((e,n)=>e.max-e.min-(n.max-n.min)));const i=n.reduce(((e,i,t)=>{const o=n.slice(t).reduce(((e,n)=>e+n.size),0),r=u.round(i.size/o*e),s=h(i.min,i.max,r);return i.size=s,e-s}),e[x.axis.oS]);x[0].each(1,(e=>e.fixOffset())),0!==i&&(r=setTimeout((()=>console.warn(`Splitview: free ${i}px`)),1e3))}let f=null;function d(){null!==e.parentElement&&(m(t,{[x.axis.cSS]:"100%",[x.axis.sS]:"0"}),x[0].each(1,(e=>e.relayout())),c())}function g(n){x[1][0][1]=n,n[0]=x[1][0],n[1]=x[1],x[1][0]=n,e.appendChild(n.eView),t.appendChild(n.eHandler)}function v(n){n[0][1]=n[1],n[1][0]=n[0],n[1]=n[0]=null,e.removeChild(n.eView),t.removeChild(n.eHandler)}function z(e){if(e.container!==x.container)throw new Error("The view does NOT belongs to this container.")}const b=new WeakMap,x={resizing:!1,axis:w.row,direction:"row",0:null,1:null,snapshot(){x[0].each(1,(e=>e._size=e.size))},restore(){x[0].each(1,(e=>e.size=e._size))},container:Object.seal({set direction(e){if("row"!==e&&"column"!==e)throw new Error("A direction MUST be `row` or `column`.");e!==x.direction&&(x.direction=e,x.axis=w[e],d())},get direction(){return x.direction},get element(){return e},get firstView(){return x[0][1].view},get lastView(){return x[1][0].view},get viewList(){const e=[];return x[0].each(1,(n=>e.push(n.view))),e},mount(n){n.appendChild(e),d(),function(){const n={width:e.offsetWidth,height:e.offsetHeight};!function i(){const t=e.offsetWidth,o=e.offsetHeight;n.width===t&&n.height===o||(c(),e.dispatchEvent(p("container-size-change",x.container))),n.width=t,n.height=o,f=s.requestAnimationFrame(i)}()}()},destroy(){e.parentElement.removeChild(e),cancelAnimationFrame(f)},relayout:d,appendView:e=>(z(e),g(b.get(e)),d(),e),removeView(e){z(e);const n=b.get(e);if(void 0===n)throw new Error("The view is NOT in container.");return v(n),d(),e},insertBefore(n,i=null){if(z(n),null===i)g(b.get(i));else{if(i.container!==x.container)throw new Error("The reference view does NOT belongs to this container.");null!==n.previousSibling&&v(b.get(n));const o=b.get(n),r=b.get(i);o[1]=r,o[0]=r[0],r[0][1]=o,r[0]=o,e.insertBefore(o.eView,r.eView),t.insertBefore(o.eHandler,r.eHandler)}return d(),n},createView(e={}){if("object"!=typeof e)throw new Error("An options MUST be an object.");const i=y(function(e){const i={min:50,max:n},{min:t=i.min,max:o=i.max}=e;if(t<0||!isFinite(t))throw new Error("A min MUST be >= 0 and finity.");if(o<t)throw new Error("A max MUST >= the min and finity.");return i.min=t,i.max=o,i}(e),x);return b.set(i.view,i),i.view}})};return x[0]=S(x),x[1]=S(x),x[0][1]=x[1],x[1][0]=x[0],x.container},Object.defineProperty(e,"__esModule",{value:!0})}));
